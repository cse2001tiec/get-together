<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSE 2001 TIEC Batch Reunion Invitation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .banner {
            width: 100%;
            height: auto;
            display: block;
        }
        .content {
            padding: 30px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        .preferences-section {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #3498db;
        }
        .preference-item {
            margin-bottom: 15px;
        }
        .preference-item strong {
            color: #2c3e50;
            display: inline-block;
            width: 180px;
        }
        .letter {
            background-color: #f8f9fa;
            padding: 25px;
            border-left: 4px solid #3498db;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .responsibilities {
            background-color: #e8f5e8;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .responsibilities ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .groups-section {
            margin-top: 30px;
        }
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .group-card {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }
        .group-header {
            background-color: #3498db;
            color: white;
            padding: 10px;
            margin: -15px -15px 15px -15px;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
        }

        .members {
            color: #2c3e50;
            line-height: 1.4;
        }
        .member-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        .status-indicator {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            cursor: default;
            border: 2px solid #ccc;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            pointer-events: none;
        }
        .status-yes {
            background-color: #27ae60;
            border-color: #27ae60;
            color: white;
        }
        .status-no {
            background-color: #e74c3c;
            border-color: #e74c3c;
            color: white;
        }
        .status-pending {
            background-color: #f8f9fa;
            border-color: #ccc;
        }
        .fond-memory {
            color: #7f8c8d;
            font-style: italic;
        }
        .group-header {
            cursor: pointer;
        }
        .group-header:hover {
            background-color: #2980b9;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 80%;
            overflow-y: auto;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: black;
        }
        .form-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .form-table th, .form-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .form-table th {
            background-color: #f2f2f2;
        }
        .form-table select, .form-table input {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        .submit-btn {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        .submit-btn:hover {
            background-color: #2980b9;
        }
        .clickable-member {
            cursor: pointer;
            color: #3498db;
        }
        .clickable-member:hover {
            text-decoration: underline;
        }
        .group-leader {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="image.png" alt="CSE 2001 TIEC Banner" class="banner">
        
        <div class="content">
            <h1>CSE2001TIEC - 25th Year Get Together </h1>
            
            <div class="preferences-section">
                <h3 style="color: #2c3e50; margin-top: 0;">Reunion Preferences</h3>
                <div class="preference-item">
                    <strong>Date Options:</strong> July 25th 2026 | August 10th 2026
                </div>
                <div class="preference-item">
                    <strong>Location Preferences:</strong> College | Resort/Hotel near college
                </div>
                <div class="preference-item">
                    <strong>Family Preferences:</strong> Classmates only or Family Included
                </div>
            </div>
            
            <div class="letter">
                <p>While the entire CSE class is united, GenAI has identified the following 12 sub-groups in our class. Smaller groups are easy to manage and are not a bad thing. While you know LLMs can hallucinate, these groups can be inaccurate, and if you want to move to a different group, please reach out and we are happy to move you.</p>
                
                <p>The next step is for each group leader to confirm that you will take over the coveted position assigned to you to unite the entire CSE 2001 TIEC batch for the 25th year re-union. Take your time, reach out to your group members, and you will be the voice for your group.</p>
                
                <div class="responsibilities">
                    <strong>What we expect from the Group Leads are the following:</strong>
                    <ul>
                        <li>Reach out to all your group members by phone, chat, WhatsApp, or visit them in person</li>
                        <li>Work out the best possible dates & location for the get-together</li>
                        <li>Gather their current location, preferred location for the get-together event, constraints if any, help needed, etc.</li>
                        <li>Periodically update the member status using the Google Forms integrated with this page. </li>
                        <li>You have to motivate your group members to attend this one last get-together of our batch in our lifetime</li>
                    </ul>
                </div>
            </div>
            
            <div class="groups-section">
                <h2>Groups & Leads</h2>
                <p style="color: #666; font-style: italic; margin-bottom: 20px;">Note: Click on the group name to update member status. Updates take 24 hours to reflect.</p>
                <div style="margin-bottom: 20px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
                    <strong>Legend:</strong> 
                    <span style="color: #27ae60; font-weight: bold; margin: 0 10px;">✓ Attending</span>
                    <span style="color: #e74c3c; font-weight: bold; margin: 0 10px;">✗ Not Attending</span>
                    <span style="color: #666; font-weight: bold; margin: 0 10px;">? Status Unknown</span>
                </div>
                <div class="groups-grid">
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 1', ['Benny Rajesh (Group Lead)', 'Vairavan', 'Thanasekar', 'Bala', 'Prince Noel', 'Ramesh'])">Group 1</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending">?</div> <span class="group-leader">Benny Rajesh (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Vairavan</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Thanasekar</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Bala</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Prince Noel</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Ramesh</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 2', ['Venkateshwaran (Group Lead)', 'Rajesh (Madras)', 'Blessed', 'Jeno', 'Sinthu'])">Group 2</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending">?</div> <span class="group-leader">Venkateshwaran (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Rajesh (Madras)</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Blessed</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Jeno</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Sinthu</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 3', ['Swapna (Group Lead)', 'Sarramma', 'Bindu', 'Tincy', 'Rukku', 'Jincy', 'Viba'])">Group 3</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending">?</div> <span class="group-leader">Swapna (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Sarramma</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Bindu</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Tincy</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Rukku</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Jincy</div>
                            <div class="member-item"><div class="status-indicator status-pending">?</div> Viba</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 4', ['Muthu (Group Lead)', 'Ajay', 'Ganesan', 'Ganesh Babu', 'Hariraman', 'Kuthalanathan (Fond Memory)'])">Group 4</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Muthu (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Ajay</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Ganesan</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Ganesh Babu</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Hariraman</div>
                            <div class="member-item fond-memory"><div class="status-indicator" style="background-color: #bdc3c7; cursor: not-allowed;">-</div> Kuthalanathan (Fond Memory)</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 5', ['Durga (Group Lead)', 'Ranjeeta', 'Helen', 'Aruna', 'Shobana', 'Deepa'])">Group 5</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Durga (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Ranjeeta</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Helen</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Aruna</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Shobana</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Deepa</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 6', ['Babitha (Group Lead)', 'Ayesha', 'Aarti', 'Lakshmi', 'Aneena', 'Awsalya (final year)'])">Group 6</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Babitha (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Ayesha</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Aarti</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Lakshmi</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Aneena</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Awsalya (final year)</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 7', ['Pradeep Cherian (Group Lead)', 'Pranesh', 'Ajeesh', 'Chris', 'Iype', 'Sunil'])">Group 7</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Pradeep Cherian (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Pranesh</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Ajeesh</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Chris</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Iype</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Sunil</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 8', ['Jino (Group Lead)', 'Nihilson', 'Lekshmana Rajesh', 'Smitha', 'Glossy', 'Anusha', 'Lisa'])">Group 8</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Jino (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Nihilson</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Lekshmana Rajesh</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Smitha</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Glossy</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Anusha</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Lisa</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 9', ['Ullas (Group Lead)', 'Philip', 'Sreeni', 'Joel', 'Indrajith'])">Group 9</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Ullas (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Philip</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Sreeni</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Joel</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Indrajith</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 10', ['Anoop (Group Lead)', 'Abro', 'Marshal', 'Jinosam', 'Anush'])">Group 10</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Anoop (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Abro</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Marshal</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Jinosam</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Anush</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 11', ['Kiran (Group Lead)', 'Sivaram', 'Krishnam', 'Shubhashini', 'Deleep', 'Ashok Reddy (Fond Memory)'])">Group 11</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Kiran (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Sivaram</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Krishnam</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Shubhashini</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Deleep</div>
                            <div class="member-item fond-memory"><div class="status-indicator" style="background-color: #bdc3c7; cursor: not-allowed;">-</div> Ashok Reddy (Fond Memory)</div>
                        </div>
                    </div>
                    
                    <div class="group-card">
                        <div class="group-header" onclick="openModal('Group 12', ['Rinu (Group Lead)', 'Basilin', 'Manu', 'Jess'])">Group 12</div>
                        <div class="members">
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> <span class="group-leader">Rinu (Group Lead)</span></div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Basilin</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Manu</div>
                            <div class="member-item"><div class="status-indicator status-pending" onclick="toggleStatus(this)">?</div> Jess</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="letter" style="margin-top: 30px;">
                <h3 style="color: #2c3e50; margin-top: 0;">Security</h3>
                <p>All those security nerds trying to verify if this page is stealing or tracking your data, you can review the repository for the static page here: <a href="https://github.com/cse2001tiec/get-together" target="_blank" style="color: #3498db;">https://github.com/cse2001tiec/get-together</a></p>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="groupModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Group Information Form</h2>
            <form id="groupForm">
                <table class="form-table" id="memberTable">
                    <thead>
                        <tr>
                            <th>Member Name</th>
                            <th>Attending</th>
                            <th>Preferred Date</th>
                            <th>Preferred Location</th>
                            <th>Attending with Family</th>
                            <th>Remarks</th>
                        </tr>
                    </thead>
                    <tbody id="memberTableBody">
                    </tbody>
                </table>
                <button type="button" class="submit-btn" onclick="submitForm()">Submit to Google Forms</button>
            </form>
        </div>
    </div>

    <script>
        function openModal(groupName, members) {
            const p = prompt('Enter password to access group information:');
            const h = '1339332841';
            if (!p || simpleHash(p) !== h || !checkIntegrity()) {
                alert('Access denied!');
                return;
            }
            
            document.getElementById('modalTitle').textContent = groupName + ' - Member Information';
            const tbody = document.getElementById('memberTableBody');
            tbody.innerHTML = '';
            
            members.forEach(member => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${member}</td>
                    <td>
                        <select name="attending_${member.replace(/\s+/g, '_')}">
                            <option value="">Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </td>
                    <td>
                        <select name="date_${member.replace(/\s+/g, '_')}">
                            <option value="">Select Date</option>
                            <option value="25-July-2026">25-July-2026</option>
                            <option value="1st August 2026">1st August 2026</option>
                            <option value="15th August 2026">15th August 2026</option>
                        </select>
                    </td>
                    <td>
                        <select name="location_${member.replace(/\s+/g, '_')}">
                            <option value="">Select Location</option>
                            <option value="The Indian Engg College, Vadakankulam">The Indian Engg College, Vadakankulam</option>
                            <option value="Resort near Kanyakumari">Resort near Kanyakumari</option>
                        </select>
                    </td>
                    <td>
                        <select name="family_${member.replace(/\s+/g, '_')}">
                            <option value="">Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </td>
                    <td><input type="text" name="remarks_${member.replace(/\s+/g, '_')}" placeholder="Any remarks"></td>
                `;
                tbody.appendChild(row);
            });
            
            document.getElementById('groupModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('groupModal').style.display = 'none';
        }
        
        async function submitForm() {
            const formUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSeq8hmorHpg2aBCcyqCsLEnG_QdKOWok5c_MBnvZznFdRuV0g/formResponse';
            
            // Build summary of responses
            let summary = '';
            const rows = document.querySelectorAll('#memberTableBody tr');
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                const memberName = cells[0].textContent;
                const attending = cells[1].querySelector('select').value;
                const date = cells[2].querySelector('select').value;
                const location = cells[3].querySelector('select').value;
                const family = cells[4].querySelector('select').value;
                const remarks = cells[5].querySelector('input').value;
                
                if (attending || date || location || family || remarks) {
                    summary += `${memberName}: Attending=${attending}, Date=${date}, Location=${location}, Family=${family}, Remarks=${remarks}\n`;
                }
            });
            
            if (summary) {
                const formData = new FormData();
                formData.append('entry.544202740', summary);
                
                try {
                    await fetch(formUrl, {
                        method: 'POST',
                        body: formData,
                        mode: 'no-cors'
                    });
                    alert('Data submitted successfully!');
                } catch (error) {
                    alert('Submission failed. Please try again.');
                }
            } else {
                alert('No data to submit.');
            }
            
            closeModal();
        }
        
        // Hash and integrity functions
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString();
        }
        
        function checkIntegrity() {
            return document.querySelector('script').textContent.includes('1339332841');
        }
        
        function toggleStatus(element) {
            
            if (element.classList.contains('status-pending')) {
                element.className = 'status-indicator status-yes';
                element.textContent = '✓';
            } else if (element.classList.contains('status-yes')) {
                element.className = 'status-indicator status-no';
                element.textContent = '✗';
            } else if (element.classList.contains('status-no')) {
                element.className = 'status-indicator status-pending';
                element.textContent = '?';
            }
        }
        
        // Embedded attendance data
        function fetchAttendanceData() {
            const csvData = `Name,Attending
Venkateshwaran (Group Lead), Y
Sinthu, Y
Swapna (Group Lead), Y
Rajesh (Madras), Y
Anoop (Group Lead), Y
Durga (Group Lead), Y
Ranjeeta, Y
Jino (Group Lead), Y
Muthu (Group Lead), Y
`;
            
            const rows = csvData.split('\n').slice(1); // Skip header
            const attendanceMap = {};
            
            rows.forEach((row, index) => {
                if (row.trim()) {
                    const columns = row.split(',');
                    const name = columns[0] ? columns[0].trim() : '';
                    const status = columns[1] ? columns[1].trim() : '';
                    
                    if (name && status) {
                        const fullStatus = status === 'Y' ? 'Yes' : status === 'N' ? 'No' : status;
                        attendanceMap[name] = fullStatus;
                        console.log(`${name} -> ${fullStatus}`);
                    }
                }
            });
            
            console.log('Final attendance map:', attendanceMap);
            updateStatusIndicators(attendanceMap);
        }
        
        // Update status indicators based on Google Sheets data
        function updateStatusIndicators(attendanceMap) {
            document.querySelectorAll('.member-item').forEach(item => {
                const indicator = item.querySelector('.status-indicator');
                const nameText = item.textContent.trim();
                const name = nameText.replace(indicator.textContent, '').trim(); // Remove indicator symbol
                
                console.log('Checking name:', name, 'Available names:', Object.keys(attendanceMap));
                
                if (attendanceMap[name]) {
                    const status = attendanceMap[name].toLowerCase();
                    console.log('Found status for', name, ':', status);
                    if (status === 'yes') {
                        indicator.className = 'status-indicator status-yes';
                        indicator.textContent = '✓';
                    } else if (status === 'no') {
                        indicator.className = 'status-indicator status-no';
                        indicator.textContent = '✗';
                    } else {
                        indicator.className = 'status-indicator status-pending';
                        indicator.textContent = '?';
                    }
                }
            });
        }
        
        // Load attendance data when page loads
        window.addEventListener('load', fetchAttendanceData);
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('groupModal');
            if (event.target == modal) {
                closeModal();
            }
        }
        
        // Add footer with timestamp
        window.addEventListener('load', function() {
            const footer = document.createElement('div');
            footer.style.cssText = 'text-align: center; padding: 20px; color: #666; font-size: 12px; border-top: 1px solid #ddd; margin-top: 30px;';
            footer.innerHTML = `CSE2001TIEC : Status page generated using GenAI tools and Google forms data: ${new Date().toLocaleString()}`;
            document.querySelector('.container').appendChild(footer);
        });
    </script>
</body>
</html>